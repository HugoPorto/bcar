<ion-header [translucent]="true">
  <ion-toolbar color="dark">
    <ion-title> Novo Orçamento </ion-title>
  </ion-toolbar>
</ion-header>
<ion-content [fullscreen]="true">
  <ion-item>
    <h3>Total: {{ total }}</h3>
  </ion-item>
  <ion-card>
    <ion-card-content>
      <ion-list>
        <ion-item>
          <ion-input label="*Qtd.:" name="quantity" [(ngModel)]="modelBudget.quantity"
            (input)="updateTotalValue()"></ion-input>
        </ion-item>
        <ion-item>
          <ion-input label="Unidade:" name="unit" [(ngModel)]="modelBudget.unit" placeholder="Peça"></ion-input>
        </ion-item>
        <ion-item>
          <ion-input label="*Descrição:" name="description" [(ngModel)]="modelBudget.description"></ion-input>
        </ion-item>
        <ion-item>
          <ion-input label="*Valor Unitário R$:" name="unitaryValue" [(ngModel)]="modelBudget.unitaryValue"
            (input)="updateTotalValue()"></ion-input>
        </ion-item>
        <ion-item>
          <ion-input label="Valor Total R$:" name="totalValue" [(ngModel)]="modelBudget.totalValue"
            disabled></ion-input>
        </ion-item>
        <ion-item>
          <ion-input label="*Cliente:" name="client" [(ngModel)]="modelBudget.client"></ion-input>
        </ion-item>
      </ion-list>
      <ion-button (click)="addBudget()">Adicionar</ion-button>
      <ion-button *ngIf="budgets !== null && budgets.length > 0" (click)="createBudget()">Salvar</ion-button>
      <ion-button *ngIf="budgets !== null && budgets.length > 0">Salvar Enviar</ion-button>
      <ion-button *ngIf="budgetId !== null && budgets.length > 0" (click)="updateBudget()">Atualizar</ion-button>
    </ion-card-content>
  </ion-card>
  <ion-list *ngIf="budgets !== null && budgets.length > 0">
    <ion-card *ngFor="let budget of budgets; let index = index">
      <ion-card-header>
        <ion-card-subtitle>Quantidade {{ budget.quantity }}</ion-card-subtitle>
        <ion-card-title>Cliente: {{ modelBudget.client }}</ion-card-title>
      </ion-card-header>

      <ion-card-content>
        <ion-grid>
          <ion-row>
            <ion-col><ion-label>Unidade.</ion-label></ion-col>
            <ion-col><ion-label>Descrição</ion-label></ion-col>
            <ion-col><ion-label>Valor Unitário</ion-label></ion-col>
            <ion-col><ion-label>Valor Total.</ion-label></ion-col>
          </ion-row>
        </ion-grid>
        <ion-grid>
          <ion-row>
            <ion-col><ion-label>{{ budget.unit }}</ion-label></ion-col>
            <ion-col><ion-label>{{ budget.description }}</ion-label></ion-col>
            <ion-col><ion-label>{{ budget.unitaryValue }}</ion-label></ion-col>
            <ion-col><ion-label>{{ budget.totalValue }}</ion-label></ion-col>
          </ion-row>
        </ion-grid>
        <ion-button (click)="removeItemBudget(index)">Remover</ion-button>
      </ion-card-content>
    </ion-card>
  </ion-list>

</ion-content>